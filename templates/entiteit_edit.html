{% extends "base_app.html" %}
{% block content-data %}
<form action="{{form_addr}}" method="post" >{% csrf_token %}
<div class="left_view">Naam entiteit:&nbsp;</div>
<div class="right"><input type="text" name="naam" id="naam" value="{{ data.naam }}" size="{{lengte.naam}}" /></div><div class="clear">&nbsp;</div>
<div class="left_edit">Korte omschrijving:&nbsp;</div>
<div class="right"><input type="text" name="kort" id="kort" value="{{ data.kort }}" size="{{lengte.kort}}" /></div><div class="clear">&nbsp;</div>
<div class="left_edit">&nbsp;</div>
<div class="right"><input type="submit" name="pbKort" id="pbKort" value="Alle wijzigingen opslaan" /></div><div class="clear">&nbsp;</div>
<hr/>
<div class="left_edit">Functie:&nbsp;</div>
<div class="right"><textarea name="functie" id="functie" rows="8" cols="80" />{{ data.functie }}</textarea></div><div class="clear">&nbsp;</div>
<div class="left_edit">Levensloop:&nbsp;</div>
<div class="right"><textarea name="levensloop" id="levensloop" rows="8" cols="80" />{{ data.levensloop }}</textarea></div><div class="clear">&nbsp;</div>
</form>
    {%if not new%}

        <div class="left_edit">Attributen:&nbsp;</div>
        <div class="right">
        <table width="100%">
        <form action="/{{proj}}/entiteit/{{data.id}}/attribuut/add/" method="post">{% csrf_token %}
        <tr><td colspan="5">Naam: <input name="naam" type="text" value=""/>
            Type: <select name="type">
            <option value="A" >Tekst</option>
            <option value="N" >Aantal</option>
            <option value="D" >Datum</option>
            <option value="B" >Bedrag</option>
            </select>
            Sleutel: <select name="key"><option>--kies--</option>
            <option >1</option>
            <option >2</option>
            <option >3</option>
            <option >4</option>
            <option >5</option></select>
            Relatie met: <select name="rel">{%if andere%}<option>--kies--</option>{%endif%}
            {%for y in andere%}<option>{{y}}</option>{%endfor%}</select>
            <input type="submit" value="Voer op"/><br/>
            Details (o.a. gegevensbereik):<br/>
            <textarea name="bereik" rows="3" cols="80"></textarea></td>
        </tr></form>
        {%for attr in attrs%}
        <form action="/{{proj}}/entiteit/{{data.id}}/attribuut/{{attr.id}}/mut/" method="post">{% csrf_token %}
        <tr><td colspan="5">
            Naam: <input name="naam" type="text" value="{{attr.naam}}"/>
            Type: <select  name="type">
            <option value="A" {%if attr.type == 'A'%}selected="selected"{%endif%}>Tekst</option>
            <option value="N" {%if attr.type == 'N'%}selected="selected"{%endif%}>Aantal</option>
            <option value="D" {%if attr.type == 'D'%}selected="selected"{%endif%}>Datum</option>
            <option value="B" {%if attr.type == 'B'%}selected="selected"{%endif%}>Bedrag</option>
            </select>
            Sleutel: <select name="key"><option>--kies--</option>
            <option {%if attr.primarykey == 1%}selected="selected"{%endif%}>1</option>
            <option {%if attr.primarykey == 2%}selected="selected"{%endif%}>2</option>
            <option {%if attr.primarykey == 3%}selected="selected"{%endif%}>3</option>
            <option {%if attr.primarykey == 4%}selected="selected"{%endif%}>4</option>
            <option {%if attr.primarykey == 5%}selected="selected"{%endif%}>5</option>
            </select>
            Relatie met: <select name="rel">{%if andere%}<option>--kies--</option>{%endif%}{%for y in andere%}
            <option {%if attr.relatie.naam == y%}selected="selected"{%endif%}>{{y}}</option>{%endfor%}
            </select>
            <input type="submit" value="Wijzig"/><br/>Details (o.a. gegevensbereik):<br/>
            <textarea name="bereik" rows="3" cols="80">{{attr.bereik}}</textarea>
        </td></tr></form>
        {%endfor%}
        </table>
    </div><div class="clear">&nbsp;</div>
    {%endif%}
<hr/>
{% endblock %}
